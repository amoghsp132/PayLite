<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paylite Payment Gateway</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/widget.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

<div class="payment-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <h3>Payment Methods</h3>
    <div class="method active" data-method="card"><i class="fa fa-credit-card"></i> Credit / Debit Cards</div>
    <div class="method" data-method="emi"><i class="fa fa-percent"></i> EMI</div>
    <div class="method" data-method="netbanking"><i class="fa fa-university"></i> Net Banking</div>
    <div class="method" data-method="upi"><i class="fa fa-bolt"></i> UPI</div>
    <div class="method" data-method="wallet"><i class="fa fa-google-wallet"></i> Wallets</div>
    <div class="method" data-method="qr"><i class="fa fa-qrcode"></i> QR</div>
  </div>

  <!-- Main Form -->
  <div class="form-area" id="formArea">
    <h2>Enter Card Details</h2>
    <form id="paymentForm">
      <div class="form-group">
        <label>Card Number</label>
        <input type="text" placeholder="Valid Card Number" required>
      </div>
      <div class="form-group">
        <label>Expiry Date</label>
        <input type="text" placeholder="MM / YY" required>
      </div>
      <div class="form-group">
        <label>CVV</label>
        <input type="text" placeholder="CVV" required>
      </div>
      <div class="form-group">
        <label>Cardholder Name</label>
        <input type="text" placeholder="Name as on card" required>
      </div>
      <button class="pay-btn" type="submit">Make Payment</button>
    </form>
    
  </div>
  

  <!-- Summary Panel -->
  <div class="summary">
    <h4>Merchant Name</h4>
    <p id="merchantName">Amogh Patil</p>
    <h4>Order ID</h4>
    <p id="orderId">TEST132ABCXYZ</p>
    <h4>Payment Amount</h4>
    <p class="amount" id="amount">₹100</p>

    <div class="secure-text"><i class="fa fa-lock"></i>100% Secure Payments</div><br>
    <div id="timer" style="font-size:1.3rem; color:#24005f; font-weight:600; text-align:center; margin-bottom:1rem;">
  10:00
</div>
 <br><p class="warning" style="text-align:center; color:red; font-size:1rem">DO NOT REFRESH THIS PAGE<br>Doing so will cancel your payment transaction.</p>
  </div>
</div>
<script>
  // Set countdown time in seconds
  let timeLeft = 600;

  function formatTime(secs) {
    const minutes = Math.floor(secs / 60);
    const seconds = secs % 60;
    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  }

  const timerEl = document.getElementById('timer');
  timerEl.textContent = formatTime(timeLeft);

  const interval = setInterval(() => {
    timeLeft--;
    timerEl.textContent = formatTime(timeLeft);
    if (timeLeft <= 0) {
      clearInterval(interval);
      timerEl.textContent = "Time's up!";
      alert("Transaction Failed.\nSession expired. Please try again.");
      window.location.href = "/";
    }
  }, 1000);
</script>

<script>
  // Dynamic merchant info simulation
  const merchantName = "Amogh Patil";
  const orderId = "TEST132ABCXYZ";
  const amount = "₹100";
  document.getElementById("merchantName").textContent = merchantName;
  document.getElementById("orderId").textContent = orderId;
  document.getElementById("amount").textContent = amount;

  // Payment method switching
  const methods = document.querySelectorAll(".method");
  const formArea = document.getElementById("formArea");

  const forms = {
    card: `
      <h2>Enter Card Details</h2>
      <form>
        <div class="form-group"><label>Card Number</label><input type="text" placeholder="Valid Card Number" required></div>
        <div class="form-group"><label>Expiry Date</label><input type="text" placeholder="MM / YY" required></div>
        <div class="form-group"><label>CVV</label><input type="text" placeholder="CVV" required></div>
        <div class="form-group"><label>Cardholder Name</label><input type="text" placeholder="Name as on card" required></div>
        <button class="pay-btn">Make Payment</button>
      </form>
    `,
    upi: `
      <h2>Pay via UPI</h2>
      <form>
        <div class="form-group"><label>UPI ID</label><input type="text" placeholder="yourname@upi" required></div>
        <button class="pay-btn">Pay Now</button>
      </form>
    `,
    netbanking: `
      <h2>Pay via Net Banking</h2>
      <form>
        <div class="form-group"><label>Account Number</label><input type="text" placeholder="Enter Account Number" required></div>
        <div class="form-group"><label>IFSC Code</label><input type="text" placeholder="Enter IFSC Code" required></div>
        <button class="pay-btn">Proceed to Bank</button>
      </form>
    `,
    wallet: `
      <h2>Pay using Wallet</h2>
      <form>
        <div class="form-group"><label>Choose Wallet</label><input type="text" placeholder="Paytm / PhonePe / Amazon Pay" required></div>
        <button class="pay-btn">Pay with Wallet</button>
      </form>
    `,
qr: `
  <h2>Scan & Pay</h2>
  <div style="text-align:center;">
    <img 
      src='{{print(qr_code)}}' 
      alt="UPI QR" 
      style="width:250px;height:250px;margin-bottom:1rem;border-radius:10px;"
    >
    <p>Scan this QR with any UPI app to complete payment.</p>
  </div>
`,

    emi: `
      <h2>Pay via EMI</h2>
      <form>
        <div class="form-group"><label>Card Number</label><input type="text" placeholder="Enter Credit Card Number" required></div>
        <div class="form-group"><label>Tenure (Months)</label><input type="number" placeholder="6 / 9 / 12" required></div>
        <button class="pay-btn">Proceed with EMI</button>
      </form>
    `
  };

  methods.forEach(btn => {
    btn.addEventListener("click", () => {
      methods.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const method = btn.dataset.method;
      formArea.innerHTML = forms[method];
    });
  });
</script>

</body>
</html>
